webpackJsonp([2],{"7T4z":function(t,n,a){"use strict";a.d(n,"a",function(){return e}),a.d(n,"b",function(){return o});var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{attrs:{id:"app"}},[a("van-nav-bar",{attrs:{fixed:"",title:"电台节目"}}),t._v(" "),a("van-card",{staticClass:"info",attrs:{title:t.channel.title,thumb:t.channel.thumbs.small_thumb}},[a("div",{attrs:{slot:"desc"},slot:"desc"},[a("div",{staticClass:"subtext"},[t._v(t._s("播放: "+t.channel.detail.playcount))]),t._v(" "),a("div",{staticClass:"subtext"},[t._v(t._s("更新: "+t.channel.update_time.split(" ")[0]))])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("van-icon",{staticStyle:{"font-size":"32px",color:"#ff5722"},attrs:{name:"like"}})],1)]),t._v(" "),a("van-cell",{attrs:{title:"节目清单",icon:"wap-nav"}}),t._v(" "),a("van-list",{staticClass:"list",attrs:{finished:t.finished},model:{value:t.loading,callback:function(n){t.loading=n},expression:"loading"}},[a("van-cell-group",t._l(t.list,function(n,e){return a("van-cell",{key:e,attrs:{title:n.title+"",label:t.caculateTime(n.duration)}},[a("van-icon",{staticClass:"van-cell__right-icon",attrs:{slot:"right-icon",name:"play"},on:{click:function(a){t.selectProgram(n)}},slot:"right-icon"})],1)}))],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.list.length,expression:"list.length!=0"}],staticClass:"more",on:{click:t.loadMore}},[t._v("加载更多")]),t._v(" "),a("van-actionsheet",{attrs:{actions:t.actions},model:{value:t.showAction,callback:function(n){t.showAction=n},expression:"showAction"}})],1)},o=[]},"9r66":function(t,n){},A3ry:function(t,n,a){"use strict";var e=a("//Fk"),o=a.n(e),i=a("mtWM"),r=a.n(i),s={};s.fogPost=function(t,n,a){var e=localStorage.getItem("token");e&&(r.a.defaults.headers.common.Authorization="Bearer "+e),r.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var i={transformRequest:[function(t){var n="";for(var a in t)n+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return n}]};return r.a.post(t,n,i).then(function(t){return o.a.resolve(t.data)})},s.fogGet=function(t,n){var a=localStorage.getItem("token");return a&&(r.a.defaults.headers.common.Authorization="Bearer "+a),r.a.get(t,n).then(function(t){return o.a.resolve(t.data)})},s.fetchToken=function(){var t={grant_type:"client_credentials",client_id:"7MFq7ZUgoqOhWft7zfUgSaSdgIz09oxRCTMx0SoV",client_secret:"lRq8eWtBrk9MZ0zm687PsPZUPsVy0MBXknvIFMQ6lcYt4lOINeRC94pIXuOZm0ONi4uviIoeQMXwWZ0pnDuns896sDuKkoVypLpdk2OFZYCflO4UNmvMuGiMojdqcu5s"};this.fogPost("https://api.fogcloud.io/v3/open_api/token/",t,"json").then(function(t){localStorage.setItem("token",t.data.access_token)}).catch(function(t){console.log(t)})},s.getCategoryAttr=function(){var t={category_id:1599};return this.fogPost("https://api.fogcloud.io/v3/story_qt/categoryattr/",t)},s.getAttrChannel=function(t,n,a){var e={category_id:1599,curpage:t,pagesize:n,attrs:a};return this.fogPost("https://api.fogcloud.io/v3/story_qt/attrchannel/",e)},s.getChannelondemandInfo=function(t){var n={channel_id:t};return this.fogPost("https://api.fogcloud.io/v3/story_qt/channelondemand/",n)},s.getChannelondemandProgramList=function(t,n,a){var e={channel_id:t,curpage:n,pagesize:a};return this.fogPost("https://api.fogcloud.io/v3/story_qt/channelondemandprogramlist/",e)},s.getProgramAttr=function(t,n){var a={channel_id:t,program_id:n};return this.fogPost("https://api.fogcloud.io/v3/story_qt/channelondemandprogramaddr/",a)},s.getProgramInfo=function(t){var n={program_id:t};return this.fogPost("https://api.fogcloud.io/v3/story_qt/program/",n)},s.sendVideoToDevice=function(t,n){var a="http://www.qkidsplay.com/didawechat/MessageHandler.ashx?";return a+="action=SendMessageToDevice&openId="+t+"&message="+n,delete r.a.defaults.headers.common.Authorization,r.a.get(a).then(function(t){return o.a.resolve(t.data)})},s.long2short=function(t){var n="http://www.qkidsplay.com/didawechat/DidaHandler.ashx?action=Long2Short&longurl="+t;return delete r.a.defaults.headers.common.Authorization,r.a.get(n).then(function(t){var n=t.data;return"string"==typeof n&&(n=JSON.parse(n)),o.a.resolve(n)})},n.a=s},DOfO:function(t,n){},Eidx:function(t,n){},IUZ0:function(t,n,a){"use strict";function e(t){a("Eidx"),a("sJZ2")}var o=a("M1Jq"),i=a("7T4z"),r=a("XyMi"),s=e,c=Object(r.a)(o.a,i.a,i.b,!1,s,"data-v-a96ba72e",null);n.a=c.exports},"L/un":function(t,n){},M1Jq:function(t,n,a){"use strict";var e,o=a("mvHQ"),i=a.n(o),r=a("bOdI"),s=a.n(r),c=a("yZCJ"),l=(a.n(c),a("OjEV")),u=a.n(l),d=a("QP/A"),h=(a.n(d),a("pyxX")),f=a.n(h),g=a("cnGM"),m=(a.n(g),a("S6j6")),v=a.n(m),p=a("jydU"),_=(a.n(p),a("WQwN")),y=a.n(_),w=a("1r3O"),P=(a.n(w),a("mKRw")),b=a.n(P),I=a("Mcfu"),C=(a.n(I),a("r9aq")),k=a.n(C),M=a("9ULi"),x=(a.n(M),a("lQdh")),A=a.n(x),q=a("tcuZ"),z=(a.n(q),a("iMPx")),O=a.n(z),S=a("A3ry"),U=a("wxfA");n.a={components:(e={},s()(e,O.a.name,O.a),s()(e,A.a.name,A.a),s()(e,k.a.name,k.a),s()(e,b.a.name,b.a),s()(e,y.a.name,y.a),s()(e,v.a.name,v.a),s()(e,f.a.name,f.a),s()(e,u.a.name,u.a),e),data:function(){return{channelId:"",channel:{title:"",thumbs:{},playcount:0,update_time:"",detail:{}},list:[],page:1,pageSize:20,loading:!1,finished:!1,program:{},showAction:!1,actions:[{name:"网页播放",callback:this.onWebPlay},{name:"推送嘀嗒播放",callback:this.onDidaPlay}]}},mounted:function(){this.channelId=U.a.getQueryValue("channelId"),this.fetchChannelInfo(),this.fetchProgram()},methods:{fetchChannelInfo:function(){var t=this;S.a.getChannelondemandInfo(this.channelId).then(function(n){t.channel=n.data})},fetchProgram:function(){var t=this;S.a.getChannelondemandProgramList(this.channelId,this.page,this.pageSize).then(function(n){console.log(n);for(var a in n.data)t.list.push(n.data[a]);t.loading=!1,t.finished=!0})},onClickLeft:function(){history.back()},loadMore:function(){++this.page,this.fetchProgram()},caculateTime:function(t){return"时长: "+Math.floor(t/60)+"分"+t%60+"秒"},selectProgram:function(t){this.program=t,this.showAction=!0},onWebPlay:function(){this.showAction=!1;var t=this.program.weburl;window.location.href=t},onDidaPlay:function(){this.showAction=!1,S.a.getProgramAttr(this.channelId,this.program.id).then(function(t){console.log(t);var n=U.a.getQueryValue("openId"),a=t.data.editions[0].url[0];return void S.a.long2short(a).then(function(t){console.log(t);var a=t.short_url,e={raw:{type:"remote|lesson",command:"0000|"+a+"|0"}};console.log(n),console.log(i()(e)),S.a.sendVideoToDevice(n,i()(e))})})}}}},QRH8:function(t,n,a){"use strict";a.d(n,"a",function(){return e}),a.d(n,"b",function(){return o});var e=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{attrs:{id:"app"}},[a("Program")],1)},o=[]},UJur:function(t,n){},cdS4:function(t,n){},itIU:function(t,n){},m7zo:function(t,n){},msbK:function(t,n,a){"use strict";var e=a("IUZ0");n.a={components:{Program:e.a},data:function(){return{showProgram:!1}},mounted:function(){},methods:{}}},qeWC:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=a("7+uW"),o=a("rM2d");new e.default({render:function(t){return t(o.a)}}).$mount("#app")},rM2d:function(t,n,a){"use strict";function e(t){a("L/un")}var o=a("msbK"),i=a("QRH8"),r=a("XyMi"),s=e,c=Object(r.a)(o.a,i.a,i.b,!1,s,null,null);n.a=c.exports},sJZ2:function(t,n){},wxfA:function(t,n,a){"use strict";n.a={getQueryValue:function(t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(n);return null!=a?decodeURIComponent(a[2]):null}}},xL5C:function(t,n){}},["qeWC"]);